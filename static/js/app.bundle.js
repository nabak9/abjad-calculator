!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=5)}([function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e,t,n){return(u=s()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&o(a,n.prototype),a}).apply(null,arguments)}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return u(e,arguments,i(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o(r,e)})(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}var h,f=function(){function e(){var e=[].slice.call(arguments);this.cancelables=null!=e?e:[],this._isCancelled=!1}var t=e.prototype;return t.hasCancellables=function(){return this.cancelables.length>0},t.addCancelable=function(e){return this.throwIfCancelled("attempting to add cancellable to token that is already cancelled"),this.cancelables.push(e),200===this.cancelables.length&&console.log("potential memory leak: cancellation token has over 200 clean up calls"),this},t.removeCancelable=function(e){this.throwIfCancelled("attempting to remove cancellable from token that is already cancelled");var t=this.cancelables.indexOf(e);return-1!==t&&this.cancelables.splice(t,1),this},t.setTimeout=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var n=this;void 0===t&&(t=0);var r=setTimeout((function(){n.removeCancelable(a),e()}),t),a=function(){return clearTimeout(r)};this.addCancelable(a)})),t.setInterval=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var n=setInterval(e,t);this.addCancelable((function(){return clearInterval(n)}))})),t.requestAnimationFrame=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=this,n=requestAnimationFrame((function(){t.removeCancelable(r),e()})),r=function(){return cancelAnimationFrame(n)};this.addCancelable(r)})),t.animationLoop=function(e){var t=requestAnimationFrame((function n(r){t=requestAnimationFrame(n),e(r)}));this.addCancelable((function(){return cancelAnimationFrame(t)}))},t.throwIfCancelled=function(e){if(this.isCanceled)throw new Error(e||"cancellation token is cancelled")},t.chain=function(e,t){return void 0===t&&(t=!1),t&&e.chain(this,!1),this.addCancelable((function(){return e.cancel()})),this},t.registerDomEvent=function(e,t,n){return e.addEventListener(t,n),this.addCancelable((function(){return e.removeEventListener(t,n)})),this},t.cancel=function(){this.isCanceled||(this._isCancelled=!0,this.cancelables.forEach((function(e){return e()})),this.cancelables=void 0)},r(e,[{key:"isCanceled",get:function(){return this._isCancelled}}]),e}(),p=function(){function e(){this.subscribeChannel=[],this.subscribeOnceChannel=[],this.onAfterFire=[]}var t=e.prototype;return t.subscribe=function(e,t){return this.createSubscription(e,this.subscribeChannel,t).facade},t.subscribeOnce=function(e,t){return this.createSubscription(e,this.subscribeOnceChannel,t).facade},t.hasSubscriptions=function(){return this.subscriptions>0},t.cancelAll=function(){var e,t=this;this.isFiring?this.onAfterFire.push((function(){var e;t.subscribeChannel.length=0,t.subscribeOnceChannel.length=0,null===(e=t.onEmpty)||void 0===e||e.call(t)})):(this.subscribeChannel.length=0,this.subscribeOnceChannel.length=0,null===(e=this.onEmpty)||void 0===e||e.call(this))},t.afterFire=function(){this.onAfterFire.length>0&&(this.onAfterFire.forEach((function(e){return e()})),this.onAfterFire.length=0)},t.fire=function(e){this.isFiring=!0;for(var t=this.subscribeChannel.length,n=0;n<t;n++)try{this.subscribeChannel[n].callback(e)}catch(e){console.error(e)}if(this.subscribeOnceChannel.length>0){t=this.subscribeOnceChannel.length;for(var r=0;r<t;r++)try{this.subscribeOnceChannel[r].callback(e)}catch(e){console.error(e)}this.subscribeOnceChannel.length=0}this.isFiring=!1,this.afterFire()},t.createSubscription=function(e,t,n){var r=this,a={callback:e},i={cancel:function(){r.cancel(a,t)}};return void 0!==n&&n.addCancelable((function(){return r.cancel(a,t)})),t.push(a),{subscription:a,facade:i}},t.cancel=function(e,t){var n,r=this,a=t.indexOf(e);a>=0&&(this.isFiring?this.onAfterFire.push((function(){return r.cancel(e,t)})):(t.splice(a,1),this.hasSubscriptions()||null===(n=this.onEmpty)||void 0===n||n.call(this)))},r(e,[{key:"subscriptions",get:function(){return this.subscribeChannel.length+this.subscribeOnceChannel.length}}]),e}();function v(e,t,n){if(!e.s){if(n instanceof m){if(!n.s)return void(n.o=v.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(v.bind(null,e,t),v.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}(h=t.OperationType||(t.OperationType={}))[h.FILTER=0]="FILTER",h[h.NOOP=1]="NOOP",h[h.MAP=2]="MAP",h[h.DELAY=3]="DELAY",h[h.MAP_DELAY=4]="MAP_DELAY",h[h.DELAY_FILTER=5]="DELAY_FILTER",h[h.MAP_DELAY_FILTER=6]="MAP_DELAY_FILTER";var m=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,a=this.s;if(a){var i=1&a?t:n;if(i){try{v(r,1,i(this.v))}catch(e){v(r,2,e)}return r}return this}return this.o=function(e){try{var a=e.v;1&e.s?v(r,1,t?t(a):a):n?v(r,1,n(a)):v(r,2,a)}catch(e){v(r,2,e)}},r},e}();var y="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function g(e){return e instanceof m&&1&e.s}function w(e,t,n){if("function"==typeof e[y]){var r,a,i,o=e[y]();if(function e(s){try{for(;!((r=o.next()).done||n&&n());)if((s=t(r.value))&&s.then){if(!g(s))return void s.then(e,i||(i=v.bind(null,a=new m,2)));s=s.v}a?v(a,1,s):a=s}catch(e){v(a||(a=new m),2,e)}}(),o.return){var s=function(e){try{r.done||o.return()}catch(e){}return e};if(a&&a.then)return a.then(s,(function(e){throw s(e)}));s()}return a}if(!("length"in e))throw new TypeError("Object is not iterable");for(var u=[],c=0;c<e.length;c++)u.push(e[c]);return function(e,t,n){var r,a,i=-1;return function o(s){try{for(;++i<e.length&&(!n||!n());)if((s=t(i))&&s.then){if(!g(s))return void s.then(o,a||(a=v.bind(null,r=new m,2)));s=s.v}r?v(r,1,s):r=s}catch(e){v(r||(r=new m),2,e)}}(),r}(u,(function(e){return t(u[e])}),n)}var b,E=function(){function e(e,t){void 0===t&&(t="RootDataSource"),this.name=t,this.value=e,this.primed=void 0!==e,this.updateEvent=new p}e.fromMultipleSources=function(t,n){for(var r,a=new e,i=d(t);!(r=i()).done;){r.value.listen((function(e){return a.update(e)}),n)}return a.name="Combination of ["+t.map((function(e){return e.name})).join(" & ")+"]",a};var t=e.prototype;return t.repeatLast=function(){return this.update(this.value),this},t.update=function(e){if(this.primed=!0,this.updating)throw new Error("Problem in data source: Unstable value propagation. When updating a value the stream was updated back as a direct response. This can lead to infinite loops and is therefore not allowed");this.updating=!0,this.value=e,this.updateEvent.fire(e),this.updating=!1},t.withInitial=function(e){return this.primed||this.update(e),this},t.listenAndRepeat=function(e,t){return e(this.value),this.listen(e,t)},t.listen=function(e,t){return this.updateEvent.subscribe(e,t).cancel},t.listenOnce=function(e,t){return this.updateEvent.subscribeOnce(e,t).cancel},t.transform=function(t,n,r,a,i,o,s,u,c,l,d,h){var p,v=[t,n,r,a,i,o,s,u,c,l,d].filter((function(e){return e&&(!(e instanceof f)||(p=e,!1))}));h&&(p=h);var m=new e(void 0,this.name+" "+v.map((function(e){return e.name})).join(" "));return(this.primed?this.listenAndRepeat:this.listen).call(this,C(v,m),p),m},t.pipe=function(e,t){return this.listen((function(t){return e.update(t)}),t),this},t.map=function(e,t){var n;return t=null!=t?t:new f,n=this.primed?new A(t,e(this.value)):new A(t),this.listen((function(t){n.update(e(t))}),t),n},t.tap=function(e,t){return this.listen((function(t){e(t)}),t),this},t.aggregate=function(e,t,n){var r=this;n=null!=n?n:new f;var a=new A(n,t(this.value,e.value));return this.listen((function(){return a.update(t(r.value,e.value))}),n),e.listen((function(){return a.update(t(r.value,e.value))}),n),a},t.aggregateThree=function(e,t,n,r){var a=this;r=null!=r?r:new f;var i=new A(r,n(this.value,e.value,t.value));return this.listen((function(){return i.update(n(a.value,e.value,t.value))}),r),e.listen((function(){return i.update(n(a.value,e.value,t.value))}),r),t.listen((function(){return i.update(n(a.value,e.value,t.value))}),r),i},t.aggregateFour=function(e,t,n,r,a){var i=this;a=null!=a?a:new f;var o=new A(a,r(this.value,e.value,t.value,n.value));return this.listen((function(){return o.update(r(i.value,e.value,t.value,n.value))}),a),e.listen((function(){return o.update(r(i.value,e.value,t.value,n.value))}),a),t.listen((function(){return o.update(r(i.value,e.value,t.value,n.value))}),a),n.listen((function(){return o.update(r(i.value,e.value,t.value,n.value))}),a),o},t.aggregateFive=function(e,t,n,r,a,i){var o=this;i=null!=i?i:new f;var s=new A(i,a(this.value,e.value,t.value,n.value,r.value));return this.listen((function(){return s.update(a(o.value,e.value,t.value,n.value,r.value))}),i),e.listen((function(){return s.update(a(o.value,e.value,t.value,n.value,r.value))}),i),t.listen((function(){return s.update(a(o.value,e.value,t.value,n.value,r.value))}),i),n.listen((function(){return s.update(a(o.value,e.value,t.value,n.value,r.value))}),i),r.listen((function(){return s.update(a(o.value,e.value,t.value,n.value,r.value))}),i),s},t.combine=function(e,t){var n;t=null!=t?t:new f,n=this.primed?new A(t,this.value):new A(t),this.pipe(n,t);for(var r,a=d(e);!(r=a()).done;){r.value.pipe(n,t)}return n},t.awaitNextUpdate=function(e){var t=this;return new Promise((function(n){t.listenOnce((function(e){return n(e)}),e)}))},t.cancelAll=function(){this.updateEvent.cancelAll()},e}(),A=function(e){function t(t,n,r){var a;return(a=e.call(this,n,r)||this).disposeToken=t,a.updateEvent.onEmpty=function(){t.cancel(),Object.defineProperty(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a),"value",{get:function(){throw new Error('Transient data source has expired and can no longer be used if you wish to use it even after all listeners were removed "persist". Note that persisted data sources will not be garabge collected unless you remove the subscription they have on their parent source')},set:function(){throw new Error('Transient data source has expired and can no longer be used if you wish to use it even after all listeners were removed "persist". Note that persisted data sources will not be garabge collected unless you remove the subscription they have on their parent source')}})},a}a(t,e);var n=t.prototype;return n.persist=function(){return this.updateEvent.onEmpty=void 0,this},n.listen=function(t,n){return this.disposeToken.throwIfCancelled("Transient data source has expired. Listening not possible"),e.prototype.listen.call(this,t,n)},n.listenAndRepeat=function(t,n){return this.disposeToken.throwIfCancelled("Transient data source has expired. Listening not possible"),e.prototype.listenAndRepeat.call(this,t,n)},n.listenOnce=function(t,n){return this.disposeToken.throwIfCancelled("Transient data source has expired. Listening not possible"),e.prototype.listen.call(this,t,n)},t}(E),S=function(){function e(e,t){void 0===t&&(t="RootArrayDataSource"),this.name=t,this.data=e?e.slice():[],this.lengthSource=new E(this.data.length,this.name+".length"),this.updateEvent=new p}e.fromMultipleSources=function(t){for(var n,r=[].slice.call(arguments,1),a=[0],i=new e(void 0,"ArrayDataSource of ("+r.reduce((function(t,n){return t+(n instanceof e?n.name+" ":"")}),"")+")"),o=0;o<r.length;o++)Array.isArray(r[o])?i.appendArray(r[o]):function(){i.appendArray(null!==(n=r[o].data)&&void 0!==n?n:[]);var e=o;r[o].listen((function(t){switch(t.operationDetailed){case"append":case"prepend":case"insert":i.insertAt.apply(i,[t.index+a[e]].concat(t.items));for(var n=e+1;n<a.length;n++)a[n]+=t.count;break;case"remove":case"removeLeft":case"removeRight":case"clear":i.removeRange(t.index+a[e],t.index+a[e]+t.count);for(var r=e+1;r<a.length;r++)a[r]-=t.count;break;case"merge":throw new Error("Not yet supported");case"replace":i.set(t.index+a[e],t.items[0]);break;case"swap":i.swap(t.index+a[e],t.index2+a[e])}}),t)}(),a.push(i.length.value);return i};var t=e.prototype;return t.listenAndRepeat=function(e,t){return e({operation:"add",operationDetailed:"append",index:0,items:this.data,newState:this.data,count:this.data.length}),this.listen(e,t)},t.repeatCurrentState=function(){this.update({operation:"remove",operationDetailed:"clear",count:this.data.length,index:0,items:this.data,newState:[]}),this.update({operation:"add",operationDetailed:"append",index:0,items:this.data,newState:this.data,count:this.data.length})},t.listen=function(e,t){return this.updateEvent.subscribe(e,t).cancel},t.listenOnce=function(e,t){return this.updateEvent.subscribeOnce(e,t).cancel},t.awaitNextUpdate=function(e){var t=this;return new Promise((function(n){t.listenOnce((function(e){return n(e)}),e)}))},t.getData=function(){return this.data},t.get=function(e){return this.data[e]},t.set=function(e,t){var n=this.data[e];n!==t&&(this.data[e]=t,this.update({operation:"replace",operationDetailed:"replace",target:n,count:1,index:e,items:[t],newState:this.data}),this.lengthSource.value!==this.data.length&&this.lengthSource.update(this.data.length))},t.indexOf=function(e){return this.data.indexOf(e)},t.lastIndexOf=function(e){return this.data.lastIndexOf(e)},t.includes=function(e){return this.data.includes(e)},t.replace=function(e,t){var n=this.indexOf(e);-1!==n&&this.set(n,t)},t.swap=function(e,t){if(e!==t){var n=this.data[e],r=this.data[t];this.data[t]=n,this.data[e]=r,this.update({operation:"swap",operationDetailed:"swap",index:e,index2:t,items:[n,r],newState:this.data}),this.lengthSource.value!==this.data.length&&this.lengthSource.update(this.data.length)}},t.swapItems=function(e,t){if(e!==t){var n=this.data.indexOf(e),r=this.data.indexOf(t);-1!==n&&-1!==r&&(this.data[r]=e,this.data[n]=t),this.update({operation:"swap",operationDetailed:"swap",index:n,index2:r,items:[e,t],newState:this.data}),this.lengthSource.value!==this.data.length&&this.lengthSource.update(this.data.length)}},t.appendArray=function(e){this.data=this.data.concat(e),this.update({operation:"add",operationDetailed:"append",count:e.length,index:this.data.length-e.length,items:e,newState:this.data}),this.lengthSource.value!==this.data.length&&this.lengthSource.update(this.data.length)},t.insertAt=function(e){var t,n=[].slice.call(arguments,1);0!==n.length&&((t=this.data).splice.apply(t,[e,0].concat(n)),this.update({operation:"add",operationDetailed:"insert",count:n.length,index:e,items:n,newState:this.data}),this.lengthSource.update(this.data.length))},t.push=function(){this.appendArray([].slice.call(arguments))},t.unshift=function(){var e,t=[].slice.call(arguments);(e=this.data).unshift.apply(e,t),this.update({operation:"add",operationDetailed:"prepend",count:t.length,items:t,index:0,newState:this.data}),this.lengthSource.value!==this.data.length&&this.lengthSource.update(this.data.length)},t.pop=function(){var e=this.data.pop();return this.update({operation:"remove",operationDetailed:"removeRight",count:1,index:this.data.length,items:[e],newState:this.data}),this.lengthSource.value!==this.data.length&&this.lengthSource.update(this.data.length),e},t.merge=function(e){var t=this.data;this.data=e.slice(),this.update({operation:"merge",operationDetailed:"merge",previousState:t,index:0,items:this.data,newState:this.data}),this.lengthSource.value!==this.data.length&&this.lengthSource.update(this.data.length)},t.removeRight=function(e){var t=this.data.length,n=this.data.splice(t-e,e);this.update({operation:"remove",operationDetailed:"removeRight",count:e,index:t-e,items:n,newState:this.data}),this.lengthSource.value!==this.data.length&&this.lengthSource.update(this.data.length)},t.removeLeft=function(e){var t=this.data.splice(0,e);this.update({operation:"remove",operationDetailed:"removeLeft",count:e,index:0,items:t,newState:this.data}),this.lengthSource.value!==this.data.length&&this.lengthSource.update(this.data.length)},t.removeAt=function(e){var t=this.data.splice(e,1);this.update({operation:"remove",operationDetailed:"remove",count:t.length,index:e,items:t,newState:this.data}),this.lengthSource.value!==this.data.length&&this.lengthSource.update(this.data.length)},t.removeRange=function(e,t){var n=this.data.splice(e,t-e);this.update({operation:"remove",operationDetailed:"remove",count:n.length,index:e,items:n,newState:this.data}),this.lengthSource.value!==this.data.length&&this.lengthSource.update(this.data.length)},t.remove=function(e){var t=this.data.indexOf(e);-1!==t&&this.removeAt(t)},t.clear=function(){if(0!==this.data.length){var e=this.data;this.data=[],this.update({operation:"remove",operationDetailed:"clear",count:e.length,index:0,items:e,newState:this.data}),this.lengthSource.value!==this.data.length&&this.lengthSource.update(this.data.length)}},t.shift=function(){var e=this.data.shift();return this.update({operation:"remove",operationDetailed:"removeLeft",items:[e],count:1,index:0,newState:this.data}),this.lengthSource.value!==this.data.length&&this.lengthSource.update(this.data.length),e},t.toArray=function(){return this.data.slice()},t.reverse=function(e){return new T(this,e,this.name+".reverse()")},t.sort=function(e,t,n){void 0===t&&(t=[]);var r=new D(this,e,n,this.name+".sort()");return t.forEach((function(e){e.listen((function(){return r.refresh()}))}),n),r},t.map=function(e,t,n){void 0===t&&(t=[]);var r=new k(this,e,n,this.name+".map()");return t.forEach((function(e){e.listen((function(){return r.refresh()}))}),n),r},t.unique=function(e){return new O(this,e,this.name+".unique()")},t.filter=function(e,t,n){void 0===t&&(t=[]);var r=new x(this,e,n,this.name+".filter()");return t.forEach((function(e){e.listen((function(){return r.refresh()}),n)})),r},t.forEach=function(e){return this.data.forEach(e)},t.update=function(e){this.updateEvent.fire(e)},r(e,[{key:"length",get:function(){return this.lengthSource}}]),e}(),k=function(e){function t(t,n,r,a){var i;void 0===r&&(r=new f);var o=t.getData().map(n);return(i=e.call(this,o,a)||this).parent=t,i.mapper=n,t.listen((function(e){var t,n;switch(e.operationDetailed){case"removeLeft":i.removeLeft(e.count);break;case"removeRight":i.removeRight(e.count);break;case"remove":i.remove(i.data[e.index]);break;case"clear":i.clear();break;case"prepend":(t=i).unshift.apply(t,e.items.map(i.mapper));break;case"append":i.appendArray(e.items.map(i.mapper));break;case"insert":(n=i).insertAt.apply(n,[e.index].concat(e.items.map(i.mapper)));break;case"swap":i.swap(e.index,e.index2);break;case"replace":i.set(e.index,i.mapper(e.items[0]));break;case"merge":for(var r=i.data.slice(),a=e.previousState.slice(),o=0;o<e.newState.length;o++)if(i.data.length<=o&&i.data.push(i.mapper(e.newState[o])),a[o]!==e.newState[o]){var s=a.indexOf(e.newState[o]);if(-1!==s){var u=i.data[o],c=i.data[s];i.data[o]=c,i.data[s]=u;var l=a[o],d=a[s];a[o]=d,a[s]=l}else i.data.splice(o,0,i.mapper(e.newState[o])),a.splice(o,0,e.newState[o])}i.data.length>e.newState.length&&(i.data.length=e.newState.length),i.update({operation:"merge",operationDetailed:"merge",previousState:r,index:0,items:i.data,newState:i.data})}}),r),i}return a(t,e),t.prototype.refresh=function(){this.merge(this.parent.data.map(this.mapper))},t}(S),T=function(e){function t(t,n,r){var a;void 0===n&&(n=new f);var i=t.getData().slice().reverse();return(a=e.call(this,i,r)||this).parent=t,t.listen((function(e){var t;switch(e.operationDetailed){case"removeLeft":a.removeRight(e.count);break;case"removeRight":a.removeLeft(e.count);break;case"remove":for(var n,r=d(e.items);!(n=r()).done;){var i=n.value;a.remove(i)}break;case"clear":a.clear();break;case"prepend":a.appendArray(e.items.reverse());break;case"append":(t=a).unshift.apply(t,e.items.reverse());break;case"insert":a.merge(e.newState.slice().reverse());break;case"merge":a.merge(e.items.slice().reverse());break;case"swap":case"replace":a.merge(e.newState.slice().reverse())}}),n),a}return a(t,e),t.prototype.refresh=function(){this.merge(this.parent.getData().slice().reverse())},t}(S),O=function(e){function t(t,n,r){var a;void 0===n&&(n=new f);var i,o=Array.from(new Set(t.getData()));return a=e.call(this,o,r)||this,t.listen((function(e){var n,r;switch(e.operationDetailed){case"removeLeft":case"removeRight":case"remove":for(var o,s=d(e.items);!(o=s()).done;){var u=o.value;e.newState.includes(u)||a.remove(u)}break;case"clear":a.clear();break;case"prepend":i=e.items.filter((function(e){return!a.data.includes(e)})),(n=a).unshift.apply(n,i);break;case"append":i=e.items.filter((function(e){return!a.data.includes(e)})),a.appendArray(i);break;case"insert":i=e.items.filter((function(e){return!a.data.includes(e)})),(r=a).insertAt.apply(r,[e.index].concat(i));break;case"merge":a.merge(Array.from(new Set(t.getData())));break;case"swap":a.swap(e.index,e.index2);break;case"replace":a.data.includes(e.items[0])?a.remove(e.target):a.set(e.index,e.items[0])}}),n),a}return a(t,e),t}(S),D=function(e){function t(t,n,r,a){var i;void 0===r&&(r=new f);var o=t.getData().slice().sort(n);return(i=e.call(this,o,a)||this).parent=t,i.comparator=n,t.listen((function(e){var t;switch(e.operationDetailed){case"removeLeft":case"removeRight":case"remove":for(var n,r=d(e.items);!(n=r()).done;){var a=n.value;i.remove(a)}break;case"clear":i.clear();break;case"prepend":(t=i).unshift.apply(t,e.items),i.data.sort(i.comparator);break;case"append":case"insert":i.appendSorted(e.items);break;case"merge":i.merge(e.items.slice().sort(i.comparator));break;case"swap":break;case"replace":i.remove(e.target),i.appendSorted(e.items)}}),r),i}a(t,e);var n=t.prototype;return n.appendSorted=function(e){this.merge(this.data.concat(e).sort(this.comparator))},n.refresh=function(){this.merge(this.parent.getData().slice().sort(this.comparator))},t}(S),x=function(e){function t(t,n,r,a){var i;void 0===r&&(r=new f),Array.isArray(t)&&(t=new S(t)),n=null!=n?n:function(){return!0};var o=t.data.filter(n);return(i=e.call(this,o,a)||this).parent=t,i.viewFilter=n,t.listen((function(e){var t,n,r;switch(e.operationDetailed){case"clear":i.clear();break;case"removeLeft":case"removeRight":case"remove":for(var a,o=d(e.items);!(a=o()).done;){var s=a.value;i.remove(s)}break;case"prepend":r=e.items.filter(i.viewFilter),(t=i).unshift.apply(t,r);break;case"append":r=e.items.filter(i.viewFilter),i.appendArray(r);break;case"insert":r=e.items.filter(i.viewFilter),(n=i).insertAt.apply(n,[e.index].concat(r));break;case"merge":i.merge(e.items.filter(i.viewFilter));break;case"swap":var u=i.data.indexOf(e.items[0]),c=i.data.indexOf(e.items[1]);-1!==u&&-1!==c&&i.swap(u,c);break;case"replace":var l=i.data.indexOf(e.target);if(-1!==l)i.viewFilter(e.items[0])?i.set(l,e.items[0]):i.remove(e.target)}}),r),i}a(t,e);var n=t.prototype;return n.updateFilter=function(e){if(this.viewFilter!==e)return this.viewFilter=e,this.refresh(),this.data.length},n.refresh=function(){this.merge(this.parent.data.filter(this.viewFilter))},t}(S);function C(e,n){return function(r){try{var a,i=function(e){if(a)return e;n.update(r)},o=w(e,(function(e){return function(e,t){var n,r=-1;e:{for(var a=0;a<t.length;a++){var i=t[a][0];if(i){var o=i();if(o&&o.then)break e;if(o===e){r=a;break}}else r=a}if(-1!==r){do{for(var s=t[r][1];!s;)r++,s=t[r][1];var u=s();if(u&&u.then){n=!0;break e}var c=t[r][2];r++}while(c&&!c());return u}}var l=new m,d=v.bind(null,l,2);return(n?u.then(h):o.then((function n(o){for(;;){if(o===e){r=a;break}if(++a===t.length){if(-1!==r)break;return void v(l,1,u)}if(i=t[a][0]){if((o=i())&&o.then)return void o.then(n).then(void 0,d)}else r=a}do{for(var s=t[r][1];!s;)r++,s=t[r][1];var u=s();if(u&&u.then)return void u.then(h).then(void 0,d);var c=t[r][2];r++}while(c&&!c());v(l,1,u)}))).then(void 0,d),l;function h(e){for(;;){var n=t[r][2];if(!n||n())break;r++;for(var a=t[r][1];!a;)r++,a=t[r][1];if((e=a())&&e.then)return void e.then(h).then(void 0,d)}v(l,1,e)}}(e.operationType,[[function(){return t.OperationType.NOOP}],[function(){return t.OperationType.MAP},function(){r=e.operation(r),1}],[function(){return t.OperationType.MAP_DELAY_FILTER}],[function(){return t.OperationType.DELAY_FILTER},function(){return Promise.resolve(e.operation(r)).then((function(e){function t(e){1}var n=function(){if(!e.cancelled)return Promise.resolve(e.item).then((function(e){r=e}));a=1}();return n&&n.then?n.then(t):t()}))}],[function(){return t.OperationType.DELAY}],[function(){return t.OperationType.MAP_DELAY},function(){return Promise.resolve(e.operation(r)).then((function(e){r=e,1}))}],[function(){return t.OperationType.FILTER},function(){e.operation(r)?1:a=1}]])}),(function(){return a}));return Promise.resolve(o&&o.then?o.then(i):i(o))}catch(e){return Promise.reject(e)}}}(b=t.DataFlow||(t.DataFlow={}))[b.UPSTREAM=0]="UPSTREAM",b[b.DOWNSTREAM=1]="DOWNSTREAM";var N=function(){function e(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="RootDuplexDataSource"),this.name=n,this.value=e,this.primed=void 0!==e,this.updateDownstreamEvent=new p,this.updateUpstreamEvent=new p,this.propagateWritesToReadStream=t}e.fromTwoDataSource=function(t,n,r,a){void 0===a&&(a=!0);var i=new e(r,a);return i.updateDownstreamEvent=t.updateEvent,i.updateUpstreamEvent=n.updateEvent,i};var n=e.prototype;return n.withInitial=function(e){return this.primed||this.updateDownstream(e),this},e.createOneWay=function(n,r){return void 0===n&&(n=t.DataFlow.DOWNSTREAM),new e(r,!1).oneWayFlow(n)},n.updateDownstream=function(e){if(this.updatingDownstream)throw new Error("Problem in datas source: Unstable value propagation, when updating a value the stream was updated back as a direct response. This can lead to infinite loops and is therefore not allowed");this.primed=!0,this.updatingDownstream=!0,this.value=e,this.updateDownstreamEvent.fire(e),this.updatingDownstream=!1},n.updateUpstream=function(e){if(this.updatingUpstream)throw new Error("Problem in datas source: Unstable value propagation, when updating a value the stream was updated back as a direct response. This can lead to infinite loops and is therefore not allowed");this.primed=!0,this.updatingUpstream=!0,this.value=e,this.updateUpstreamEvent.fire(e),this.propagateWritesToReadStream&&this.updateDownstreamEvent.fire(e),this.updatingUpstream=!1},n.listenAndRepeat=function(e,t){return e(this.value),this.listen(e,t)},n.listen=function(e,t){return this.updateDownstreamEvent.subscribe(e,t).cancel},n.listenUpstream=function(e,t){return this.updateUpstreamEvent.subscribe(e,t).cancel},n.listenUpstreamOnce=function(e,t){return this.updateUpstreamEvent.subscribeOnce(e,t).cancel},n.listenDownstream=function(e,t){return this.updateDownstreamEvent.subscribe(e,t).cancel},n.downStreamToDataSource=function(e){var t=new E(this.value);return this.listenDownstream((function(e){t.update(e)}),e),t},n.aggregate=function(e,t,n){var r=this;n=null!=n?n:new f;var a=new A(n,t(this.value,e.value));return this.listen((function(){return a.update(t(r.value,e.value))}),n),e.listen((function(){return a.update(t(r.value,e.value))}),n),a},n.aggregateThree=function(e,t,n,r){var a=this;r=null!=r?r:new f;var i=new A(r,n(this.value,e.value,t.value));return this.listen((function(){return i.update(n(a.value,e.value,t.value))}),r),e.listen((function(){return i.update(n(a.value,e.value,t.value))}),r),t.listen((function(){return i.update(n(a.value,e.value,t.value))}),r),i},n.aggregateFour=function(e,t,n,r,a){var i=this;a=null!=a?a:new f;var o=new A(a,r(this.value,e.value,t.value,n.value));return this.listen((function(){return o.update(r(i.value,e.value,t.value,n.value))}),a),e.listen((function(){return o.update(r(i.value,e.value,t.value,n.value))}),a),t.listen((function(){return o.update(r(i.value,e.value,t.value,n.value))}),a),n.listen((function(){return o.update(r(i.value,e.value,t.value,n.value))}),a),o},n.filter=function(t,n,r){var a=this;if("function"==typeof n){var i=new e(void 0,!1);return this.listenDownstream((function(e){t(e,i.value)&&i.updateDownstream(e)}),r),i.listenUpstream((function(e){n(e,a.value)&&a.updateUpstream(e)}),r),i}var o=new E;return this.listenDownstream((function(e){t(e,o.value)&&o.update(e)}),n),o},n.transform=function(e,t,n,r,a,i,o,s,u,c,l,d){var h,p=[e,t,n,r,a,i,o,s,u,c,l].filter((function(e){return e&&(!(e instanceof f)||(h=e,!1))}));d&&(h=d);var v=new E(void 0,this.name+" "+p.map((function(e){return e.name})).join(" "));return(this.primed?this.listenAndRepeat:this.listen).call(this,C(p,v),h),v},n.pipe=function(e,t){var n=this;return this.listenDownstream((function(t){return e.updateDownstream(t)}),t),e.listenUpstream((function(e){return n.updateUpstream(e)}),t),this},n.map=function(t,n,r){var a,i,o=this;return"function"==typeof n?(a=this.primed?new e(t(this.value),!1):new e(void 0,!1),this.listenDownstream((function(e){return a.updateDownstream(t(e))}),r),a.listenUpstream((function(e){return o.updateUpstream(n(e))}),r),a):(i=this.primed?new E(t(this.value)):new E,this.listenDownstream((function(e){return i.update(t(e))}),n),i)},n.listenOnce=function(e,t){return this.updateDownstreamEvent.subscribeOnce(e,t).cancel},n.awaitNextUpdate=function(e){var t=this;return new Promise((function(n){t.listenOnce((function(e){return n(e)}),e)}))},n.debounceUpstream=function(t,n){var r,a=this,i=new e(this.value);return i.listenUpstream((function(e){clearTimeout(r),r=setTimeout((function(){a.updateUpstream(e)}),t)}),n),this.listenDownstream((function(e){i.updateDownstream(e)}),n),i},n.debounceDownstream=function(t,n){var r,a=this,i=new e(this.value);return this.listenDownstream((function(e){clearTimeout(r),r=setTimeout((function(){i.updateDownstream(e)}),t)}),n),i.listenUpstream((function(e){a.updateUpstream(e)}),n),i},n.diff=function(e){e=null!=e?e:new f;var t=new A(e,{new:this.value,old:void 0});return this.listen((function(e){t.update({new:e,old:t.value.new})}),e),t},n.unique=function(t){var n=this,r=new e(this.value,!1),a=this.value,i=this.value;return this.listenDownstream((function(e){i!==e&&(i=e,r.updateDownstream(e))}),t),r.listenUpstream((function(e){a!==e&&(a=e,n.updateUpstream(e))}),t),r},n.oneWayFlow=function(n,r){var a=this;void 0===n&&(n=t.DataFlow.DOWNSTREAM);var i=new e(this.value,!1);return n===t.DataFlow.DOWNSTREAM?(this.listenDownstream((function(e){return i.updateDownstream(e)}),r),i.updateUpstream=function(){}):(i.listenUpstream((function(e){return a.updateUpstream(e)})),i.updateDownstream=function(){}),i},n.reduce=function(e,t,n){var r=new E(t);return this.listen((function(t){return r.update(e(r.value,t))}),n),r},n.cancelAll=function(){this.updateDownstreamEvent.cancelAll(),this.updateUpstreamEvent.cancelAll()},e}();function R(){var e={attachCalls:[],sessionToken:new f((function(){for(var t,n=d(e.tokens);!(t=n()).done;){t.value.cancel()}})),tokens:[]};return e}var L=Symbol("AurumElementModel"),M=new WeakMap,I=function(){function e(e,t){var n=this;this.children=[],this.api=t,this.api.onAttach((function(){if(void 0===n.hostNode)throw new Error("illegal state: Attach fired but not actually attached");n.render(e)}))}var t=e.prototype;return t.dispose=function(){this.clearContent()},t.attachToDom=function(t,n){if(this.hostNode)throw new Error("Aurum Element is already attached");var r=e.id++;this.hostNode=t,this.contentStartMarker=document.createComment("START Aurum Node "+r),this.contentEndMarker=document.createComment("END Aurum Node "+r),n>=t.childNodes.length?(t.appendChild(this.contentStartMarker),t.appendChild(this.contentEndMarker)):(t.insertBefore(this.contentStartMarker,t.childNodes[n]),t.insertBefore(this.contentEndMarker,t.childNodes[n+1]))},t.getWorkIndex=function(){if(void 0!==this.lastStartIndex&&this.hostNode.childNodes[this.lastStartIndex]===this.contentStartMarker)return this.lastStartIndex+1;for(var e=0;e<this.hostNode.childNodes.length;e++)if(this.hostNode.childNodes[e]===this.contentStartMarker)return this.lastStartIndex=e,e+1},t.getLastIndex=function(){if(void 0!==this.lastEndIndex&&this.hostNode.childNodes[this.lastEndIndex]===this.contentEndMarker)return this.lastEndIndex;for(var e=0;e<this.hostNode.childNodes.length;e++)if(this.hostNode.childNodes[e]===this.contentEndMarker)return this.lastEndIndex=e,e},t.clearContent=function(){if(void 0===this.hostNode)throw new Error("illegal state: Aurum element was not attched to anything");for(var e=this.getWorkIndex();this.hostNode.childNodes[e]!==this.contentEndMarker;)this.hostNode.childNodes[e]instanceof Comment?e++:this.hostNode.removeChild(this.hostNode.childNodes[e])},t.updateDom=function(){var t;if(void 0===this.hostNode)throw new Error("illegal state: Aurum element was not attched to anything");var n,r=this.getWorkIndex(),a=0;for(n=0;n<this.children.length;n++){var i=this.children[n];if(null!=i)if(i instanceof e)i.hostNode||i.attachToDom(this.hostNode,n+r+a),a+=i.getLastIndex()-n-a-r;else if(this.hostNode.childNodes[n+r+a]!==this.contentEndMarker&&this.hostNode.childNodes[n+r+a]!==this.children[n]&&this.hostNode.childNodes[n+r+a]!==(null===(t=this.children[n+1])||void 0===t?void 0:t.contentStartMarker)){if(!(i instanceof HTMLElement||i instanceof Text))throw new Error("not implemented");this.hostNode.removeChild(this.hostNode.childNodes[n+r+a]),this.hostNode.childNodes[n+r+a]?this.hostNode.insertBefore(i,this.hostNode.childNodes[n+r+a]):this.hostNode.appendChild(i)}else{if(!(i instanceof HTMLElement||i instanceof Text))throw new Error("not implemented");this.hostNode.childNodes[n+r+a]?this.hostNode.insertBefore(i,this.hostNode.childNodes[n+r+a]):this.hostNode.appendChild(i)}else a--}for(;this.hostNode.childNodes[n+r+a]!==this.contentEndMarker;)this.hostNode.removeChild(this.hostNode.childNodes[n+r+a])},e}();function F(e,t,n){if(void 0===n&&(n=!1),null!=e){if(P.has(e)){var r,a=P.get(e);if(a.sessionToken)(r=t.attachCalls).push.apply(r,a.attachCalls),t.sessionToken.chain(a.sessionToken),a.attachCalls=void 0,a.sessionToken=void 0;P.delete(e)}if(Array.isArray(e))return Array.prototype.concat.apply([],e.map((function(e){return F(e,t,n)})));if(!n){if(e instanceof Promise){var i=new E;return e.then((function(e){i.update(e)})),new K(i,j(t))}if(e instanceof E||e instanceof N)return new K(e,j(t));if(e instanceof S)return new _(e,j(t));var o=typeof e;if("string"===o||"number"===o||"bigint"===o||"boolean"===o)return document.createTextNode(e.toString())}if(e[L]){var s=e;return F(s.factory(s.props||{},s.children,j(t)),t,n)}return e}}I.id=1;var P=new WeakMap;function j(e){var t=void 0,n={renderSession:e,onAttach:function(t){e.attachCalls.push(t)},onDetach:function(n){t||(t=new f,e.tokens.push(t)),t.addCancelable(n)},onError:function(e){throw new Error("not implemented")},get cancellationToken(){return t||(t=new f,e.tokens.push(t)),t},prerender:function(e){var t=R(),n=F(e,t,!0);if(Array.isArray(n))for(var r,a=d(n);!(r=a()).done;){var i=r.value;"object"==typeof i&&P.set(i,t)}else P.set(n,t);return n},get style(){return function(e){for(var t,r=[].slice.call(arguments,1),a=new E,i=d(r);!(t=i()).done;){var o=t.value;(o instanceof E||o instanceof N)&&o.listen((function(){return a.update(U(e,r))}),n.cancellationToken)}return a.update(U(e,r)),a}}};return n}function U(e,t){for(var n="",r=0;r<e.length;r++)n+=e[r],t[r]&&("string"==typeof t[r]?n+=t[r]:n+=t[r].value);return n}var _=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).renderSessions=new WeakMap,r.dataSource=t,r}a(t,e);var n=t.prototype;return n.attachToDom=function(t,n){e.prototype.attachToDom.call(this,t,n),this.contentStartMarker.dataSource=this.dataSource,this.contentEndMarker.dataSource=this.dataSource},n.render=function(e){var t=this;e.listenAndRepeat((function(e){t.handleNewContent(e)}),this.api.cancellationToken)},n.spliceChildren=function(e,t,n){for(var r,a=d(n?this.children.splice(e,t,n):this.children.splice(e,t));!(r=a()).done;){var i=r.value;this.renderSessions.get(i).sessionToken.cancel()}},n.handleNewContent=function(e){var t=[];switch(e.operationDetailed){case"merge":for(var n=e.previousState.slice(),r=0;r<e.newState.length;r++)if(this.children.length<=r&&this.children.push(this.renderItem(e.newState[r],t)),n[r]!==e.newState[r]){var a=n.indexOf(e.newState[r],r);if(-1!==a){var i=this.children[r],o=this.children[a];this.children[r]=o,this.children[a]=i;var s=n[r],u=n[a];n[r]=u,n[a]=s}else this.spliceChildren(r,0,this.renderItem(e.newState[r],t)),n.splice(r,0,e.newState[r])}this.children.length>e.newState.length&&(this.children.length=e.newState.length);break;case"remove":case"removeLeft":case"removeRight":this.spliceChildren(e.index,e.count);break;case"append":for(var c,l=d(e.items);!(c=l()).done;){var h=c.value,f=this.renderItem(h,t);Array.isArray(f)?this.children=this.children.concat(f):this.children.push(f)}break;case"replace":var p=this.renderItem(e.items[0],t);if(Array.isArray(p))throw new Error("illegal state");this.children[e.index]=p;break;case"swap":var v=this.children[e.index],m=this.children[e.index2];this.children[e.index2]=v,this.children[e.index]=m;break;case"prepend":for(var y,g=d(e.items);!(y=g()).done;){var w=y.value,b=this.renderItem(w,t);if(Array.isArray(b))throw new Error("illegal state");this.children.unshift(b)}break;case"insert":for(var E,A=e.index,S=d(e.items);!(E=S()).done;){var k=E.value,T=this.renderItem(k,t);if(Array.isArray(T))throw new Error("illegal state");this.children.splice(A,0,T),A+=1}break;case"remove":for(var O,D=d(e.items);!(O=D()).done;){var x=O.value,C=this.renderItem(x,t);if(Array.isArray(C))throw new Error("illegal state");this.children.unshift(C)}break;case"clear":this.children.length=0,this.renderSessions=new WeakMap;break;default:throw new Error("not implemented")}this.updateDom();for(var N=0,R=t;N<R.length;N++){(0,R[N])()}},n.renderItem=function(e,t){if(null!=e){var n=R(),r=F(e,n);if(null!=r)return r instanceof I&&n.sessionToken.addCancelable((function(){return r.dispose()})),this.renderSessions.set(r,n),t.push.apply(t,n.attachCalls),r}},t}(I),K=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).api.cancellationToken.addCancelable((function(){var e;return null===(e=r.renderSession)||void 0===e?void 0:e.sessionToken.cancel()})),r.dataSource=t,r}a(t,e);var n=t.prototype;return n.attachToDom=function(t,n){e.prototype.attachToDom.call(this,t,n),this.contentStartMarker.dataSource=this.dataSource,this.contentEndMarker.dataSource=this.dataSource},n.render=function(e){var t=this;e.listenAndRepeat((function(e){t.handleNewContent(e)}),this.api.cancellationToken)},n.handleNewContent=function(e){if(this.lastValue!==e){var t=!1;if(1===this.children.length&&this.children[0]instanceof Text){var n=typeof e;"string"!==n&&"bigint"!==n&&"number"!==n&&"boolean"!==n||(this.children[0].nodeValue=e,t=!0)}t||this.fullRebuild(e),this.updateDom();for(var r,a=d(this.renderSession.attachCalls);!(r=a()).done;){(0,r.value)()}this.lastValue=e}},n.fullRebuild=function(e){var t=this;this.clearContent(),this.endSession(),this.renderSession=R();var n=F(e,this.renderSession);if(void 0!==n){Array.isArray(n)||(n=[n]);for(var r,a=function(){var e=r.value;e instanceof I&&(e.attachToDom(t.hostNode,t.getLastIndex()),t.renderSession.sessionToken.addCancelable((function(){e.dispose()})))},i=d(n);!(r=i()).done;)a();Array.isArray(n)&&(this.children=n)}else this.children=[]},n.endSession=function(){this.renderSession&&(this.renderSession.sessionToken.cancel(),this.renderSession=void 0)},t}(I),V=function(){function e(e,t){this.input=null!=e?e:new E,this.output=null!=t?t:this.input}e.fromFetchRaw=function(t){var n=new E,r=new E;return n.listen((function(e){r.update(fetch(t,e))})),new e(n,r)},e.fromFetchPostJson=function(t,n){var r=new E,a=new E;return r.listen((function(e){try{var r=a.update;return Promise.resolve(fetch(t,Object.assign({method:"POST",headers:{"Content-Type":"application/json"}},n,{body:JSON.stringify(e)})).then((function(e){return e.json()}))).then((function(e){r.call(a,e)}))}catch(e){return Promise.reject(e)}})),new e(r,a)},e.fromFetchGetJson=function(t,n){var r=new E,a=new E;return r.listen((function(){try{var e=a.update;return Promise.resolve(fetch(t).then((function(e){return e.json()}))).then((function(t){e.call(a,t)}))}catch(e){return Promise.reject(e)}})),new e(r,a)};var t=e.prototype;return t.update=function(e){this.input.update(e)},t.transform=function(t,n,r,a,i,o,s,u,c,l,d,h){var p,v=[t,n,r,a,i,o,s,u,c,l,d].filter((function(e){return e&&(!(e instanceof f)||(p=e,!1))}));h&&(p=h);var m=new E(void 0,this.output.name+" "+v.map((function(e){return e.name})).join(" "));return this.listen(C(v,m),p),new e(this.input,m)},t.getOutput=function(){return this.output},t.listen=function(e,t){return this.output.listen(e,t)},t.listenAndRepeat=function(e,t){return this.output.listenAndRepeat(e,t)},t.listenOnce=function(e,t){return this.output.listenOnce(e,t)},t.awaitNextUpdate=function(e){return this.output.awaitNextUpdate(e)},t.cancelAll=function(){this.input.cancelAll(),this.output.cancelAll()},r(e,[{key:"name",get:function(){return"IN:"+this.input.name+" OUT:"+this.output.name}},{key:"value",get:function(){return this.output.value}}]),e}();function Y(){var e;return{name:"unique",operationType:t.OperationType.FILTER,operation:function(t){return t!==e&&(e=t,!0)}}}var W={drag:"onDrag",dragstart:"onDragStart",dragend:"onDragEnd",dragexit:"onDragExit",dragover:"onDragOver",dragenter:"onDragEnter",dragleave:"onDragLeave",blur:"onBlur",focus:"onFocus",click:"onClick",dblclick:"onDblClick",keydown:"onKeyDown",keyhit:"onKeyHit",keyup:"onKeyUp",mousedown:"onMouseDown",mouseup:"onMouseUp",mousemove:"onMouseMove",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",load:"onLoad",error:"onError"},q=["id","name","draggable","tabindex","style","role","contentEditable","slot","title"];function B(e,t,n,r){return function(a,i,o){var s=document.createElement(e);a&&function(e,t,n,r,a){H(e,W,t),a&&H(e,a,t);var i=Object.keys(t).filter((function(e){return e.includes("-")}));J(e,q,t,n,i),r&&J(e,r,t,n);t.class&&function(e,t,n){if("string"==typeof t)e.className=t;else if(t instanceof E||t instanceof N)t.value&&(Array.isArray(t.value)?(e.className=t.value.join(" "),t.transform(Y(),n).listen((function(){e.className=t.value.join(" ")}))):(e.className=t.value,t.transform(Y(),n).listen((function(){e.className=t.value})))),t.transform(Y(),n).listen((function(t){return e.className=t}));else{var r=t.reduce((function(e,t){return"string"==typeof t?e+" "+t:t.value?e+" "+t.value:e}),"");e.className=r;for(var a,i=d(t);!(a=i()).done;){var o=a.value;o instanceof E&&o.transform(Y(),n).listen((function(n){var r=t.reduce((function(e,t){return"string"==typeof t?e+" "+t:t.value?e+" "+t.value:e}),"");e.className=r}))}}}(e,t.class,n)}(s,a,o.cancellationToken,t,n);var u=F(i,o.renderSession);return function e(t,n){if(null==n)return;if(Array.isArray(n)){for(var r,a=d(n);!(r=a()).done;){var i=r.value;e(t,i)}return}if(n instanceof I)n.attachToDom(t,t.childNodes.length);else{if(!(n instanceof HTMLElement||n instanceof Text))throw new Error("Unexpected child type passed to DOM Node: "+n);t.appendChild(n)}}(s,u),a.onAttach&&o.onAttach((function(){return a.onAttach(s)})),a.onDetach&&o.onDetach((function(){s.isConnected&&s.parentElement.removeChild(s),a.onDetach(s)})),null==r||r(s,a,o.cancellationToken),s}}function H(e,t,n){var r=function(r){n[t[r]]&&(n[t[r]]instanceof E?e.addEventListener(r,(function(e){return n[t[r]].update(e)})):n[t[r]]instanceof N?e.addEventListener(r,(function(e){return n[t[r]].updateDownstream(e)})):"function"==typeof n[t[r]]&&e.addEventListener(r,(function(e){return n[t[r]](e)})))};for(var a in t)r(a)}function J(e,t,n,r,a){for(var i,o=d(t);!(i=o()).done;){var s=i.value;n[s]&&z(e,n[s],s,r)}if(a)for(var u,c=d(a);!(u=c()).done;){var l=u.value;n[l]&&z(e,n[l],l,r)}}function z(e,t,n,r){if("string"==typeof t)e.setAttribute(n,t);else if("boolean"==typeof t)t&&e.setAttribute(n,"");else{if(!(t instanceof E||t instanceof N))throw new Error("Attributes only support types boolean, string, number and data sources");"string"==typeof t.value?e.setAttribute(n,t.value):"boolean"==typeof t.value&&t.value&&e.setAttribute(n,""),t.transform(Y(),r).listen((function(t){"string"==typeof t?e.setAttribute(n,t):"boolean"==typeof t&&(t?e.setAttribute(n,""):e.removeAttribute(n))}))}}var G=B("input",["placeholder","readonly","disabled","accept","alt","autocomplete","autofocus","checked","defaultChecked","formAction","formEnctype","formMethod","formNoValidate","formTarget","max","maxLength","min","minLength","pattern","multiple","required","type"],{input:"onInput",change:"onChange"},(function(e,t,n){var r=e;t.value&&(t.value instanceof E?(t.value.listenAndRepeat((function(e){r.value=e}),n),r.addEventListener("input",(function(){t.value.update(r.value)}))):t.value instanceof N?(t.value.listenAndRepeat((function(e){r.value=e}),n),r.addEventListener("input",(function(){t.value.updateUpstream(r.value)}))):r.value=t.value),t.checked&&(t.checked instanceof E?(t.checked.listenAndRepeat((function(e){r.checked=e}),n),r.addEventListener("change",(function(){t.checked.update(r.checked)}))):t.checked instanceof N?(t.checked.listenAndRepeat((function(e){r.checked=e}),n),r.addEventListener("change",(function(){t.checked.updateUpstream(r.checked)}))):r.checked=t.checked)})),$=B("select",void 0,{change:"onChange"},(function(e,t,n){var r=e;t.value&&(t.value instanceof E?(t.value.listenAndRepeat((function(e){r.value=e}),n),r.addEventListener("change",(function(){t.value.update(r.value)}))):t.value instanceof N?(t.value.listenAndRepeat((function(e){r.value=e}),n),r.addEventListener("change",(function(){t.value.updateUpstream(r.value)}))):r.value=t.value),t.selectedIndex&&(t.selectedIndex instanceof E?(t.selectedIndex.listenAndRepeat((function(e){r.selectedIndex=e}),n),r.addEventListener("change",(function(){t.selectedIndex.update(r.selectedIndex)}))):t.selectedIndex instanceof N?(t.selectedIndex.listenAndRepeat((function(e){r.selectedIndex=e}),n),r.addEventListener("change",(function(){t.selectedIndex.updateUpstream(r.selectedIndex)}))):r.selectedIndex=t.selectedIndex)})),X=B("code"),Q=B("div"),Z=B("a",["href","target"]),ee=B("abbr"),te=B("h1"),ne=B("h2"),re=B("h3"),ae=B("h4"),ie=B("h5"),oe=B("h6"),se=B("area",["alt","coors"]),ue=B("article"),ce=B("aside"),le=B("span"),de=B("noscript"),he=B("video",["controls","autoplay","loop","muted","preload","src","poster","width","height"]),fe=B("ul"),pe=B("ol"),ve=B("li"),me=B("tr"),ye=B("b"),ge=B("title"),we=B("summary"),be=B("thead"),Ee=B("template"),Ae=B("q"),Se=B("pre"),ke=B("p"),Te=B("hr"),Oe=B("audio",["controls","autoplay","loop","muted","preload","src"]),De=B("br"),xe=B("button",["disabled"]),Ce=B("canvas",["width","height"]),Ne=B("data",["value"]),Re=B("details"),Le=B("em"),Me=B("footer"),Ie=B("form"),Fe=B("head"),Pe=B("header"),je=B("heading"),Ue=B("i"),_e=B("iframe",["src","srcdoc","width","height","allow","allowFullscreen","allowPaymentRequest"]),Ke=B("img",["src","alt","width","height","referrerPolicy","sizes","srcset","useMap"]),Ve=B("label",["for"]),Ye=B("link",["href","rel","media","as","disabled","type"]),We=B("nav"),qe=B("sub"),Be=B("sup"),He=B("table"),Je=B("tbody"),ze=B("tfoot"),Ge=B("td"),$e=B("th"),Xe=B("time",["datetime"]),Qe=B("style",["media"]),Ze=B("source",["src","srcSet","media","sizes","type"]),et=B("script",["src","async","defer","integrity","noModule","type"]),tt=B("svg",["width","height"]),nt=B("progress",["max","value"]),rt=B("option",["value"]),at=B("slot",["name"]),it={button:xe,code:X,hr:Te,div:Q,input:G,li:ve,span:le,style:Qe,ul:fe,p:ke,img:Ke,link:Ye,canvas:Ce,a:Z,article:ue,br:De,form:Ie,label:Ve,ol:pe,pre:Se,progress:nt,table:He,td:Ge,tr:me,th:$e,textarea:B("textArea",["placeholder","readonly","disabled","rows","wrap","autocomplete","autofocus","max","maxLength","min","minLength","required","type"],{input:"onInput",change:"onChange"},(function(e,t,n){var r=e;t.value&&(t.value instanceof E?(t.value.listenAndRepeat((function(e){r.value=e}),n),r.addEventListener("input",(function(){t.value.update(r.value)}))):t.value instanceof N?(t.value.listenAndRepeat((function(e){r.value=e}),n),r.addEventListener("input",(function(){t.value.updateUpstream(r.value)}))):r.value=t.value)})),h1:te,h2:ne,h3:re,h4:ae,h5:ie,h6:oe,head:Fe,header:Pe,footer:Me,nav:We,b:ye,i:Ue,script:et,abbr:ee,area:se,aside:ce,audio:Oe,em:Le,heading:je,iframe:_e,noscript:de,option:rt,q:Ae,select:$,source:Ze,title:ge,video:he,tbody:Je,tfoot:ze,thead:be,summary:we,details:Re,sub:qe,sup:Be,svg:tt,data:Ne,time:Xe,template:Ee,slot:at},ot=function(){function e(){}return e.attach=function(e,t){var n=R(),r=F(e,n);if(r instanceof I)r.attachToDom(t,t.childNodes.length),n.sessionToken.addCancelable((function(){return r.dispose()}));else if(Array.isArray(r)){var a=new _(new S(r),j(n));n.sessionToken.addCancelable((function(){return a.dispose()})),a.attachToDom(t,t.childNodes.length)}else t.appendChild(r),n.sessionToken.addCancelable((function(){t.removeChild(r)}));for(var i=n.attachCalls.length-1;i>=0;i--)n.attachCalls[i]();return n.sessionToken},e.factory=function(e,t){var n,r;if("string"==typeof e){r=e;var a=e;if(void 0===(e=it[e]))throw new Error("Node "+a+" does not exist or is not supported")}return(n={})[L]=!0,n.name=r,n.factory=e,n.props=t,n.children=[].slice.call(arguments,2),n},e}();function st(){var e=location.hash.substring(1);return e.includes("?")?e.substring(0,e.indexOf("?")):e.includes("#")?e.substring(0,e.indexOf("#")):e}function ut(e,t){}function ct(e,t){}function lt(e,t){}function dt(e,t){}var ht=function(){function e(e){e&&(this.data=e),this.updateEvent=new p,this.updateEventOnKey=new Map}var t=e.prototype;return t.pick=function(e,t){var n,r=new E(null===(n=this.data)||void 0===n?void 0:n[e]);return this.listenOnKey(e,(function(e){r.update(e.newValue)}),t),r},t.listen=function(e,t){return this.updateEvent.subscribe(e,t).cancel},t.map=function(e){var t=new Map,n=new S;return this.listenAndRepeat((function(r){if(r.deleted&&t.has(r.key)){var a=t.get(r.key);n.remove(a),t.delete(r.key)}else if(t.has(r.key)){var i=e(r);n.replace(t.get(r.key),i),t.set(r.key,i)}else if(!t.has(r.key)){var o=e(r);n.push(o),t.set(r.key,o)}})),n},t.listenAndRepeat=function(e,t){var n=this.updateEvent.subscribe(e,t).cancel;for(var r in this.data)e({key:r,newValue:this.data[r],oldValue:void 0,deleted:!1});return n},t.listenOnKeyAndRepeat=function(e,t,n){return t({key:e,newValue:this.data[e],oldValue:void 0}),this.listenOnKey(e,t,n)},t.listenOnKey=function(e,t,n){return this.updateEventOnKey.has(e)||this.updateEventOnKey.set(e,new p),this.updateEventOnKey.get(e).subscribe(t,n).cancel},t.keys=function(){return Object.keys(this.data)},t.values=function(){return Object.values(this.data)},t.get=function(e){return this.data[e]},t.delete=function(e){var t=this.data[e];delete this.data[e],this.updateEvent.fire({oldValue:t,key:e,newValue:void 0,deleted:!0}),this.updateEventOnKey.has(e)&&this.updateEventOnKey.get(e).fire({oldValue:t,key:e,newValue:void 0})},t.set=function(e,t){if(this.data[e]!==t){var n=this.data[e];this.data[e]=t,this.updateEvent.fire({oldValue:n,key:e,newValue:this.data[e]}),this.updateEventOnKey.has(e)&&this.updateEventOnKey.get(e).fire({oldValue:n,key:e,newValue:this.data[e]})}},t.assign=function(t){if(t instanceof e)for(var n,r=d(t.keys());!(n=r()).done;){var a=n.value;this.set(a,t.data[a])}else for(var i=0,o=Object.keys(t);i<o.length;i++){var s=o[i];this.set(s,t[s])}},t.toObject=function(){return Object.assign({},this.data)},t.toDataSource=function(){var e=this,t=new E(this.data);return this.listen((function(n){t.update(e.data)})),t},e}(),ft=function(){function e(e){e&&(this.data=e),this.updateEvent=new p,this.updateEventOnKey=new Map}var t=e.prototype;return t.pick=function(e,t){var n=new E(this.data.get(e));return this.listenOnKey(e,(function(e){n.update(e.newValue)}),t),n},t.listen=function(e,t){return this.updateEvent.subscribe(e,t).cancel},t.listenOnKeyAndRepeat=function(e,t,n){return t({key:e,newValue:this.data.get(e),oldValue:void 0}),this.listenOnKey(e,t,n)},t.listenOnKey=function(e,t,n){return this.updateEventOnKey.has(e)||this.updateEventOnKey.set(e,new p),this.updateEventOnKey.get(e).subscribe(t,n).cancel},t.keys=function(){return this.data.keys()},t.values=function(){return this.data.values()},t.get=function(e){return this.data.get(e)},t.has=function(e){return this.data.has(e)},t.delete=function(e){var t=this.data.get(e);this.data.delete(e),this.updateEvent.fire({oldValue:t,key:e,newValue:void 0,deleted:!0}),this.updateEventOnKey.has(e)&&this.updateEventOnKey.get(e).fire({oldValue:t,key:e,newValue:void 0})},t.set=function(e,t){if(this.data.get(e)!==t){var n=this.data.get(e);this.data.set(e,t),this.updateEvent.fire({oldValue:n,key:e,newValue:this.data.get(e)}),this.updateEventOnKey.has(e)&&this.updateEventOnKey.get(e).fire({oldValue:n,key:e,newValue:this.data.get(e)})}},t.assign=function(e){for(var t,n=d(e.keys());!(t=n()).done;){var r=t.value;this.set(r,e.get(r))}},t.toMap=function(){return new Map(this.data.entries())},e}(),pt=function(){function e(e){e&&(this.data=e),this.updateEvent=new p,this.updateEventOnKey=new Map}var t=e.prototype;return t.pick=function(e,t){var n=new E(this.data.has(e));return this.listenOnKey(e,(function(e){n.update(e)}),t),n},t.listen=function(e,t){return this.updateEvent.subscribe(e,t).cancel},t.listenOnKeyAndRepeat=function(e,t,n){return t(this.has(e)),this.listenOnKey(e,t,n)},t.listenOnKey=function(e,t,n){return this.updateEventOnKey.has(e)||this.updateEventOnKey.set(e,new p),this.updateEventOnKey.get(e).subscribe(t,n).cancel},t.keys=function(){return this.data.keys()},t.has=function(e){return this.data.has(e)},t.delete=function(e){this.data.delete(e),this.updateEvent.fire({key:e,exists:!1}),this.updateEventOnKey.has(e)&&this.updateEventOnKey.get(e).fire(!1)},t.add=function(e){this.data.has(e)||(this.data.add(e),this.updateEvent.fire({key:e,exists:!0}),this.updateEventOnKey.has(e)&&this.updateEventOnKey.get(e).fire(!0))},t.assign=function(e){for(var t,n=d(e.keys());!(t=n()).done;){var r=t.value;this.add(r)}},t.toSet=function(){return new Set(this.data.keys())},e}();t.ArrayAurumElement=_,t.ArrayDataSource=S,t.Aurum=ot,t.AurumElement=I,t.AurumRouter=function(e,t,n){if((t=[].concat.apply([],t.filter((function(e){return!!e})))).some((function(e){return!e[L]||!(e.factory===ut||e.factory===ct)})))throw new Error("Aurum Router only accepts Route and DefaultRoute instances as children");if(t.filter((function(e){return e.factory===ct})).length>1)throw new Error("Too many default routes only 0 or 1 allowed");var r=new E(st());return n.cancellationToken.registerDomEvent(window,"hashchange",(function(){r.update(st())})),r.transform(Y(),n.cancellationToken).withInitial(r.value).map((function(e){return function(e,t){var n,r;if(null==e)return null===(n=t.find((function(e){return e.factory===ct})))||void 0===n?void 0:n.children;if(t.find((function(t){var n;return(null===(n=t.props)||void 0===n?void 0:n.href)===e})))return t.find((function(t){var n;return(null===(n=t.props)||void 0===n?void 0:n.href)===e})).children;var a=e.split("/");a.pop();for(var i=function(){var e=a.join("/");if(t.find((function(t){var n;return(null===(n=t.props)||void 0===n?void 0:n.href)===e})))return{v:t.find((function(t){var n;return(null===(n=t.props)||void 0===n?void 0:n.href)===e})).children};a.pop()};a.length;){var o=i();if("object"==typeof o)return o.v}return null===(r=t.find((function(e){return e.factory===ct})))||void 0===r?void 0:r.children}(e,t)}))},t.CancellationToken=f,t.DataSource=E,t.DefaultRoute=ct,t.DefaultSwitchCase=dt,t.DuplexDataSource=N,t.EventEmitter=p,t.FilteredArrayView=x,t.MapDataSource=ft,t.MappedArrayView=k,t.ObjectDataSource=ht,t.ReversedArrayView=T,t.Route=ut,t.SetDataSource=pt,t.SingularAurumElement=K,t.SortedArrayView=D,t.Stream=V,t.Suspense=function(e,t,n){var r=new E(null==e?void 0:e.fallback),a=new f;return n.onDetach((function(){a.cancel()})),Promise.all(n.prerender(t,a)).then((function(e){a.isCanceled||r.update(e)}),(function(e){return a.cancel(),Promise.reject(e)})),r},t.Switch=function(e,t,n){if((t=[].concat.apply([],t.filter((function(e){return!!e})))).some((function(e){return!e[L]||!(e.factory===lt||e.factory===dt)})))throw new Error("Switch only accepts SwitchCase as children");if(t.filter((function(e){return e.factory===dt})).length>1)throw new Error("Too many default switch cases only 0 or 1 allowed");var r=new f;return n.onDetach((function(){r.cancel()})),e.state.transform(Y(),r).withInitial(e.state.value).map((function(e){return function(e,t){var n,r,a;return null!==(r=null===(n=t.find((function(t){var n;return(null===(n=t.props)||void 0===n?void 0:n.when)===e})))||void 0===n?void 0:n.children)&&void 0!==r?r:null===(a=t.find((function(e){return e.factory===dt})))||void 0===a?void 0:a.children}(e,t)}))},t.SwitchCase=lt,t.TransientDataSource=A,t.UniqueArrayView=O,t.Webcomponent=function(e,t){return customElements.define(e.name,function(n){function i(){var t;t=n.call(this)||this,void 0===e.observedAttributes&&(e.observedAttributes=[]),t.props={};for(var r,a=d(e.observedAttributes);!(r=a()).done;){var i=r.value;t.props[i]=new E}return t}a(i,n);var o=i.prototype;return o.attributeChangedCallback=function(e,t,n){t!==n&&this.props[e].update(n)},o.connectedCallback=function(){var n,r=document.createDocumentFragment();this.session=R(),this.api=j(this.session);for(var a,i=t(this.props,this.api),o=d(this.session.attachCalls);!(a=o()).done;){(0,a.value)()}ot.attach(i,r),this.attachShadow({mode:null!==(n=e.shadowRootMode)&&void 0!==n?n:"open",delegatesFocus:e.shadowRootDelegatesFocus}).appendChild(r)},o.disconnectedCallback=function(){this.session.sessionToken.cancel()},r(i,null,[{key:"observedAttributes",get:function(){return e.observedAttributes}}]),i}(c(HTMLElement))),B(e.name,e.observedAttributes,void 0,(function(e,t){for(var n in t)n in e.props||(e.props[n]=t[n])}))},t.aurumClassName=function(e,t){var n=[],r=function(r){if(e[r])if(e[r]instanceof E||e[r]instanceof N){var a=e[r],i=new E(a.value?r:"");a.listen((function(e){i.update(e?r:"")}),t),n.push(i)}else n.push(r)};for(var a in e)r(a);return n},t.aurumElementModelIdentitiy=L,t.createAPI=j,t.createRenderSession=R,t.debugMode=!1,t.dsAwait=function(){return{name:"await",operationType:t.OperationType.MAP_DELAY,operation:function(e){return e}}},t.dsAwaitLatest=function(){var e;return{operationType:t.OperationType.MAP_DELAY_FILTER,name:"awaitLatest",operation:function(t){try{var n=e=Date.now();return Promise.resolve(t).then((function(t){return e===n?{item:t,cancelled:!1}:{item:void 0,cancelled:!0}}))}catch(e){return Promise.reject(e)}}}},t.dsAwaitOrdered=function(){var e=function(){try{return Promise.resolve(n[0]).then((function(){var e=n.shift();return r.fire(),e}))}catch(e){return Promise.reject(e)}},n=[],r=new p;return{operationType:t.OperationType.MAP_DELAY,name:"awaitOrdered",operation:function(t){try{if(n.push(t),1===n.length)return e();var a=r.subscribe((function(){try{return n[0]===t?(a.cancel(),e()):Promise.resolve()}catch(e){return Promise.reject(e)}}));return Promise.resolve()}catch(e){return Promise.reject(e)}}}},t.dsBuffer=function(e){var n,r=[];return{name:"buffer "+e+"ms",operationType:t.OperationType.MAP_DELAY_FILTER,operation:function(t){return r.push(t),n?Promise.resolve({cancelled:!0,item:void 0}):n=new Promise((function(t){setTimeout((function(){n=void 0,t({cancelled:!1,item:r}),r=[]}),e)}))}}},t.dsCutOff=function(e){return{name:"cutoff "+e,operationType:t.OperationType.FILTER,operation:function(t){return 0!==e&&(e--,!0)}}},t.dsCutOffDynamic=function(e){return{name:"cutoffDynamic",operationType:t.OperationType.FILTER,operation:function(t){return 0!==e.value&&(e.update(e.value-1),!0)}}},t.dsDebounce=function(e){var n,r=new p;return{operationType:t.OperationType.DELAY_FILTER,name:"debounce "+e+"ms",operation:function(t){return new Promise((function(t){clearTimeout(n),r.fire(),r.subscribeOnce((function(){t(!0)})),n=setTimeout((function(){t(!1)}),e)}))}}},t.dsDelay=function(e){return{name:"delay "+e+"ms",operationType:t.OperationType.DELAY,operation:function(t){return new Promise((function(n){setTimeout((function(){n(t)}),e)}))}}},t.dsDiff=function(){var e=void 0;return{name:"diff",operationType:t.OperationType.MAP,operation:function(t){var n={oldValue:e,newValue:t};return e=t,n}}},t.dsEven=function(){return{name:"even",operationType:t.OperationType.FILTER,operation:function(e){return e%2==0}}},t.dsFilter=function(e){return{name:"filter",operationType:t.OperationType.FILTER,operation:function(t){return e(t)}}},t.dsFilterAsync=function(e){return{name:"filterAsync",operationType:t.OperationType.DELAY_FILTER,operation:function(t){return e(t)}}},t.dsLoadBalance=function(e){var n=0;return{name:"loadBalance ["+e.map((function(e){return e.name})).join()+"]",operationType:t.OperationType.NOOP,operation:function(t){var r=e[n++];return n>=e.length&&(n=0),r instanceof E||r instanceof V?r.update(t):r.updateDownstream(t),t}}},t.dsLock=function(e){return{name:"lock",operationType:t.OperationType.DELAY,operation:function(t){return new Promise((function(n){if(e.value)n(t);else var r=e.listen((function(){e.value&&(r(),n(t))}))}))}}},t.dsMap=function(e){return{name:"map",operationType:t.OperationType.MAP,operation:function(t){return e(t)}}},t.dsMapAsync=function(e){return{name:"mapAsync",operationType:t.OperationType.MAP_DELAY,operation:function(t){return e(t)}}},t.dsMax=function(){var e=Number.MIN_SAFE_INTEGER;return{name:"max",operationType:t.OperationType.FILTER,operation:function(t){return t>e&&(e=t,!0)}}},t.dsMin=function(){var e=Number.MAX_SAFE_INTEGER;return{name:"min",operationType:t.OperationType.FILTER,operation:function(t){return t<e&&(e=t,!0)}}},t.dsOdd=function(){return{name:"odd",operationType:t.OperationType.FILTER,operation:function(e){return e%2!=0}}},t.dsPick=function(e){return{name:"pick "+e,operationType:t.OperationType.MAP,operation:function(t){return null!=t?t[e]:t}}},t.dsPipe=function(e){return{name:"pipe "+e.name,operationType:t.OperationType.NOOP,operation:function(t){return e instanceof E||e instanceof V?e.update(t):e.updateDownstream(t),t}}},t.dsReduce=function(e,n){var r=n;return{name:"reduce",operationType:t.OperationType.MAP,operation:function(t){return r=e(r,t)}}},t.dsSemaphore=function(e){return{operationType:t.OperationType.DELAY,name:"semaphore",operation:function(t){return new Promise((function(n){if(e.value>0)e.update(e.value-1),n(t);else var r=e.listen((function(){e.value>0&&(r(),e.update(e.value-1),n(t))}))}))}}},t.dsSkip=function(e){return{operationType:t.OperationType.FILTER,name:"skip "+e,operation:function(t){return 0===e||(e--,!1)}}},t.dsSkipDynamic=function(e){return{operationType:t.OperationType.FILTER,name:"skipDynamic",operation:function(t){return 0===e.value||(e.update(e.value-1),!1)}}},t.dsStringJoin=function(e){var n;return void 0===e&&(e=", "),{name:"stringJoin "+e,operationType:t.OperationType.MAP,operation:function(t){return n?n+=e+t:n=t,n}}},t.dsTap=function(e){return{name:"tap",operationType:t.OperationType.NOOP,operation:function(t){return e(t),t}}},t.dsThrottle=function(e){var n=!1;return{name:"throttle "+e+"ms",operationType:t.OperationType.FILTER,operation:function(t){return!n&&(n=!0,setTimeout((function(){n=!1}),e),!0)}}},t.dsUnique=Y,t.nodeData=M,t.pendingSessions=P,t.processTransform=C,t.render=F},function(e,t,n){var r=n(2),a=n(3);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1},o=(r(e.i,a,i),a.locals?a.locals:{});e.exports=o},function(e,t,n){"use strict";var r,a=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o={};function s(e,t,n){for(var r=0;r<t.length;r++){var a={css:t[r][1],media:t[r][2],sourceMap:t[r][3]};o[e][r]?o[e][r](a):o[e].push(v(a,n))}}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,l=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,r){var a=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function h(e,t,n){var r=n.css,a=n.media,i=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var f=null,p=0;function v(e,t){var n,r,a;if(t.singleton){var i=p++;n=f||(f=u(t)),r=d.bind(null,n,i,!1),a=d.bind(null,n,i,!0)}else n=u(t),r=h.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t,n){return(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=a()),e=n.base?e+n.base:e,t=t||[],o[e]||(o[e]=[]),s(e,t,n),function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){o[e]||(o[e]=[]),s(e,t,n);for(var r=t.length;r<o[e].length;r++)o[e][r]();o[e].length=t.length,0===o[e].length&&delete o[e]}}}},function(e,t,n){(t=n(4)(!1)).push([e.i,"html{width:100%;height:100%}html body{width:100%;height:100%;margin:0;font-family:Arial,Helvetica,sans-serif}html body .root{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background-image:linear-gradient(to bottom left, black, #4c4b4b)}html body .root .title{color:#fff;font-size:28px;margin-bottom:20px}html body .root textarea{width:300px;height:150px;direction:rtl}html body .root button{width:80px;height:30px;margin-top:30px;background-color:#276ece;border:1px solid #276ece;color:#fff}html body .root button:disabled{opacity:.7}html body .root .result{color:#fff;margin-top:20px}",""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var a=(o=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(u," */")),i=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot).concat(e," */")}));return[n].concat(i).concat([a]).join("\n")}var o,s,u;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r=0;r<e.length;r++){var a=[].concat(e[r]);n&&(a[2]?a[2]="".concat(n," and ").concat(a[2]):a[2]=n),t.push(a)}},t}},function(e,t,n){"use strict";n.r(t);var r=n(0);n(1);function a(e){var t;return null===(t=i.find(t=>t[0].includes(e)))||void 0===t?void 0:t[1]}const i=[["ا ﺍ ﺎ ء ﺀ",1],["ب ﺏ ﺐ ﺒ ﺑ",2],["ج ﺝ ﺞ ﺠ ﺟ",3],["د ﺩ ﺪ",4],["ه ﻩ ﻪ ﻬ ﻫ",5],["و ﻭ ﻮ",6],["ز ﺯ ﺰ",7],["ح ﺡ ﺢ ﺤ ﺣ",8],["ط ﻁ ﻂ ﻄ ﻃ",9],["ي ﻱ ﻲ ﻴ ﻳ",10],["ك ﻙ ﻚ ﻜ ﻛ",20],["ل ﻝ ﻞ ﻠ ﻟ",30],["م ﻡ ﻢ ﻤ ﻣ",40],["ن ﻥ ﻦ ﻨ ﻧ",50],["س ﺱ ﺲ ﺴ ﺳ",60],["ع ﻉ ﻊ ﻌ ﻋ",70],["ف ﻑ ﻒ ﻔ ﻓ",80],["ص ﺹ ﺺ ﺼ ﺻ",90],["ق ﻕ ﻖ ﻘ ﻗ",100],["ر ﺭ ﺮ",200],["ش ﺵ ﺶ ﺸ ﺷ",300],["ت ﺕ ﺖ ﺘ ﺗ",400],["ث ﺙ ﺚ ﺜ ﺛ",500],["خ ﺥ ﺦ ﺨ ﺧ",600],["ذ ﺫ ﺬ",700],["ض ﺽ ﺾ ﻀ ﺿ",800],["ظ ﻅ ﻆ ﻈ ﻇ",900],["غ ﻍ ﻎ  ﻐ ﻏ",1e3]],o=new r.DataSource(""),s=new r.DataSource(0);r.Aurum.attach(r.Aurum.factory("div",{class:"root"},r.Aurum.factory("div",{class:"title"},"Arabic abjad numerals calculator"),r.Aurum.factory("textarea",{value:o}),r.Aurum.factory("button",{type:"button",onClick:()=>function(){let e=0;const t=o.value.trim().split(new RegExp("\\s")).toString().replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"");for(let n=0;n<t.length;n++){const r=a(t[n]);void 0!==r?e+=r:console.error(t[n]+" not found !")}s.update(e)}()},"Compute"),r.Aurum.factory("div",{class:"result"},"Result: ",s)),document.body)}]);
//# sourceMappingURL=app.bundle.js.map